{% load static %}

<header>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-md navbar-light fixed-top">
        <div class="container-fluid">
            <!-- Toggle button -->
            <button class="navbar-toggler custom-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="brand-logo" href="{% url 'index' %}"><img class="brand-logo"
                    src="{{ MEDIA_URL }}homepage-images/logo.webp" alt="Logo of Bike World Bike shop"></a>
            <!-- Collapsible wrapper -->
            <div class="collapse navbar-collapse" id="navbarToggler">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 w-100">
                    <li class="nav-item mx-1">
                        <a class="nav-link text-nowrap" href="{% url 'products' %}">All Bikes</a>
                    </li>
                    <!-- Dropw Down Category-->
                    <li class="nav-item dropdown mx-1 dropdown-hover">
                        <a class="nav-link dropdown-toggle" id="dropdownMenuActivity" data-bs-toggle="dropdown"
                            data-bs-display="static" aria-expanded="false" href="#">Activity</a>
                        <ul class="dropdown-menu activity mb-2" aria-labelledby="dropdownMenuActivity">
                            <div class="d-flex justify-content-center">
                                <li class="mx-sm-0 mx-md-3 mx-lg-5 my-sm-1 my-md-3">
                                    <a class="dropdown-item d-flex flex-column"
                                        href="{% url 'products' %}?category=all_mountain">
                                        <p>All Mountain Bikes</p>
                                        <img src="{{ MEDIA_URL }}homepage-images/all-mountain.webp"
                                            alt="Picture of Mountainbike" class="dropdown-img">
                                    </a>
                                </li>
                                <li class="mx-sm-0 mx-md-3 mx-lg-5 my-sm-1 my-md-3">
                                    <a class="dropdown-item d-flex flex-column"
                                        href="{% url 'products' %}?category=enduro">
                                        <p>Enduro Bikes</p>
                                        <img src="{{ MEDIA_URL }}homepage-images/enduro.webp"
                                            alt="Picture of Mountainbike" class="dropdown-img">
                                    </a>
                                </li>
                            </div>
                            <div class="d-flex justify-content-center">
                                <li class="mx-sm-0 mx-md-3 mx-lg-5 my-sm-1 my-md-3">
                                    <a class="dropdown-item d-flex flex-column"
                                        href="{% url 'products' %}?category=cross_country">
                                        <p>Cross Country Bikes</p>
                                        <img src="{{ MEDIA_URL }}homepage-images/cross-country.webp"
                                            alt="Picture of Mountainbike" class="dropdown-img">
                                    </a>
                                </li>

                                <li class="mx-sm-0 mx-md-3 mx-lg-5 my-sm-1 my-md-3">
                                    <a class="dropdown-item d-flex flex-column"
                                        href="{% url 'products' %}?category=trail">
                                        <p>Trail Bikes</p>
                                        <img src="{{ MEDIA_URL }}homepage-images/trail.webp"
                                            alt="Picture of Mountainbike" class="dropdown-img">
                                    </a>
                                </li>
                            </div>
                        </ul>
                    </li>
                    <!-- Dropw Down Brand-->
                    <li class="nav-item dropdown mx-1 dropdown-hover">
                        <a class="nav-link dropdown-toggle" id="dropdownMenuBrand" data-mdb-toggle="dropdown"
                            aria-expanded="false" href="#">Brands</a>
                        <ul class="dropdown-menu dropwdown-menu-brand brand mb-2" aria-labelledby="dropdownMenuBrand">
                            <p class="mx-3 my-2 dropdown-menu-brand-heading">
                                Top Brands
                            </p>
                            <div class="row">
                                <div class="col-12 d-flex justify-content-center">
                                    <li class="mx-sm-0 mx-md-3 mx-lg-5 my-sm-1 my-md-3">
                                        <a class="dropdown-item d-flex flex-column"
                                            href="{% url 'products' %}?brand=Cannondale">
                                            <p>Cannondale</p>
                                            <img src="{{ MEDIA_URL }}homepage-images/cannondale.svg"
                                                alt="Cannondale Logo" class="dropdown-img-brand">
                                        </a>
                                    </li>
                                    <li class="mx-sm-0 mx-md-3 mx-lg-5 my-sm-1 my-md-3">
                                        <a class="dropdown-item d-flex flex-column"
                                            href="{% url 'products' %}?brand=Fuji">
                                            <p>Fuji</p>
                                            <img src="{{ MEDIA_URL }}homepage-images/fuji.webp" alt="Fuji Logo"
                                                class="dropdown-img-brand">
                                        </a>
                                    </li>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-12 d-flex justify-content-center">
                                    <li class="mx-sm-0 mx-md-3 mx-lg-5 my-sm-1 my-md-3">
                                        <a class="dropdown-item d-flex flex-column"
                                            href="{% url 'products' %}?brand=Scott">
                                            <p>Scott</p>
                                            <img src="{{ MEDIA_URL }}homepage-images/scott.webp" alt="Scott Logo"
                                                class="dropdown-img-brand">
                                        </a>
                                    </li>
                                    <li class="mx-sm-0 mx-md-3 mx-lg-5 my-sm-1 my-md-3">
                                        <a class="dropdown-item d-flex flex-column"
                                            href="{% url 'products' %}?brand=Specialized">
                                            <p>Specialized</p>
                                            <img src="{{ MEDIA_URL }}homepage-images/specialized.webp"
                                                alt="Specialized Logo" class="dropdown-img-brand">
                                        </a>
                                    </li>
                                </div>
                            </div>
                        </ul>
                    </li>
                    <li class="nav-item sale mx-1">
                        <a class="nav-link mx-2 px-3 text-nowrap" href="{% url 'products' %}?category=sale">Sale</a>
                    </li>
                    <!--Search Bar -->
                    <li class="nav-item search-box pt-2 pt-md-0 ms-0 ms-md-2">
                        <form class="d-flex" role="search" method="GET" action="{% url 'products' %}">
                            <input class="form-control border-black" type="search" name="q" placeholder="Search"
                                aria-label="Search">
                            <button type="submit" class="btn btn-outline-secondary border-start-0">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor"
                                    class="bi bi-search" viewBox="-1 -1 18 18" stroke="currentColor" stroke-width="2">
                                    <path
                                        d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z">
                                    </path>
                                </svg>
                                <span class="visually-hidden">Search</span>
                            </button>
                        </form>
                    </li>
                </ul>
            </div>
            <ul class="navbar-nav d-flex flex-row user-nav">
                <li class="nav-item">
                    <a class="nav-link" href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBag"
                        aria-controls="offcanvasBag">
                        <i class="fa-solid fa-bag-shopping fs-4 position-relative mx-2">
                            <span
                                class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-orange{% if product_count == 0 %} visually-hidden{% endif %}"
                                id="qty-in-bag">
                                {{ product_count }}
                                <span class="visually-hidden">Items in bag</span>
                            </span>
                        </i>
                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="user-options" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">
                        <i class="fa-regular fa-user fs-4 mx-2"><span class="visually-hidden">Profile</span></i>
                    </a>
                    <div class="dropdown-menu user-options" aria-labelledby="user-options">
                        {% if request.user.is_authenticated %}
                        {% if request.user.is_superuser %}
                        <a href="{% url 'add_product' %}" class="dropdown-item">Product Management</a>
                        {% endif %}
                        <a href="{% url 'profile' %}" class="dropdown-item">My Profile</a>
                        <a href="{% url 'account_logout' %}" class="dropdown-item">Logout</a>
                        {% else %}
                        <a href="#" class="login-link dropdown-item" data-bs-toggle="modal" data-bs-target="#auth-modal"
                            data-tab-target="#login">Login</a>
                        <a href="#" class="register-link dropdown-item" data-bs-toggle="modal"
                            data-bs-target="#auth-modal" data-tab-target="#register">Register</a>
                        {% endif %}
                    </div>
                </li>
            </ul>
        </div>
    </nav>
</header>